import{b as H}from"../chunks/B3pWoj6v.js";import{e as ee,M as pe}from"../chunks/EYm1pbl3.js";import{p as se,t as x,i as w,b as m,e as be,g as ie,f as de,u as xe,c as q}from"../chunks/ScjmPDhD.js";import{p as te,T as he,c as s,s as v,r as o,t as O,U as ne,b as re,f as T,d as _e,a6 as ke,g as c,a7 as J,a8 as we,$ as ye}from"../chunks/BCuXwNj5.js";import{s as k,h as ze}from"../chunks/B80iz11f.js";import{i as Pe,s as je,b as E}from"../chunks/C-r6bpSB.js";import{C as Ce}from"../chunks/ClR1bYj5.js";import{f as $e,N as De}from"../chunks/nsmBxBz4.js";import{c as le,e as Se}from"../chunks/CWU1-wLY.js";import{C as Te}from"../chunks/CN6OKtl6.js";async function Me({params:g,fetch:t}){var y;try{const P=await(await t(`${H}/posts/postLists.json`)).json(),u=P.find(i=>i.slug===g.slug);if(!u)throw ee(404,`Post ${g.slug} not found`);const b=u.file||`${u.title}.md`,j=`${H}/posts/${b}`,h=await t(j);if(!h.ok)throw ee(404,`Could not fetch ${g.slug}`);const $=await h.text(),r=(y=u.column)!=null&&y.name?P.filter(i=>{var d,a;return((d=i.column)==null?void 0:d.name)===((a=u.column)==null?void 0:a.name)}).sort((i,d)=>{var n,l;const a=(n=i.column)==null?void 0:n.order,e=(l=d.column)==null?void 0:l.order;return a!==void 0&&e!==void 0&&a!==e?a-e:a!==void 0&&e===void 0?-1:a===void 0&&e!==void 0?1:new Date(d.date).getTime()-new Date(i.date).getTime()}):[];return{content:$,meta:u,columnPosts:r}}catch(z){throw console.error("Error loading post",z),ee(404,`Post ${g.slug} not found`)}}const rt=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"}));var Ne=x('<button type="button" aria-label="Go back to blogs" style="cursor: pointer;" class="group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition lg:absolute lg:-left-5 lg:-mt-2 lg:mb-0 xl:-top-1.5 xl:left-0 xl:mt-0 dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20"><svg viewBox="0 0 16 16" fill="none" aria-hidden="true" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"><path d="M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button>'),Be=x('<span class="mt-2 inline-flex items-center gap-2 self-start rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-amber-800 ring-1 ring-amber-200 dark:bg-amber-500/10 dark:text-amber-100 dark:ring-amber-500/40"> </span>'),Le=x('<div class="xl:relative"><div class="mx-auto max-w-4xl"><!> <article><header class="flex flex-col"><time class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500"><span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span> <span class="ml-3"> </span> <span class="mx-2">·</span> <span> </span></time> <!></header> <div class="mt-8 prose dark:prose-invert max-w-none"><!></div></article></div></div>');function Oe(g,t){te(t,!1);const[y,z]=de(),P=()=>ie(le,"$t",y);let u=se(t,"blog",8);const b=he("previousPathname");function j(){window.history.back()}Pe(),Ce(g,{class:"mt-16 lg:mt-32",children:(h,$)=>{var r=Le(),i=s(r),d=s(i);{var a=p=>{var C=Ne();be("click",C,j),m(p,C)};w(d,p=>{b&&p(a)})}var e=v(d,2),n=s(e),l=s(n),f=v(s(l),2),G=s(f,!0);o(f);var M=v(f,4),K=s(M,!0);o(M),o(l);var U=v(l,2);{var Q=p=>{var C=Be(),D=s(C,!0);o(C),O(R=>k(D,R),[()=>P()("ui.unpublished")],ne),m(p,C)};w(U,p=>{u().published||p(Q)})}o(n);var Z=v(n,2),V=s(Z);je(V,t,"default",{}),o(Z),o(e),o(i),o(r),O(p=>{E(l,"datetime",u().date),k(G,p),k(K,u().author)},[()=>$e(u().date)],ne),m(h,r)},$$slots:{default:!0}}),re(),z()}var Re=(g,t)=>_e(t,!c(t)),Ae=x('<li><div class="flex items-center justify-between gap-3 rounded-lg border border-dashed border-zinc-300/80 bg-zinc-50 px-3 py-2 text-foreground opacity-90 dark:border-zinc-700/80 dark:bg-zinc-700/50" aria-disabled="true"><p class="flex-1 text-sm font-medium text-foreground dark:text-white"> </p> <time class="text-xs font-normal text-muted-foreground tabular-nums text-right"> </time></div></li>'),Fe=x('<li><a class="group flex items-center gap-3 rounded-lg border border-transparent px-3 py-2 transition hover:border-zinc-200 hover:bg-zinc-50 no-underline hover:no-underline dark:hover:border-zinc-700 dark:hover:bg-zinc-700/40"><div class="flex flex-1 items-center justify-between gap-3"><p class="flex-1 text-sm font-medium text-foreground transition group-hover:text-primary dark:text-white"> </p> <time class="text-xs font-normal text-muted-foreground tabular-nums text-right transition group-hover:text-primary"> </time></div></a></li>'),Ie=x('<ul class="mt-3 space-y-1.5 list-none p-0"></ul>'),qe=x('<section class="mt-8 rounded-xl border border-zinc-100 bg-white/60 p-4 shadow-sm shadow-zinc-200/50 backdrop-blur dark:border-zinc-700/40 dark:bg-zinc-800/60 dark:shadow-none"><button type="button" class="cursor-pointer group flex w-full items-center justify-between gap-3 text-left"><div class="flex items-center gap-3"><div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary dark:bg-primary/15"><!></div> <div class="flex items-center gap-2 text-mg font-semibold leading-tight text-foreground dark:text-white"><span> </span> <span class="text-muted-foreground">-</span> <span> </span></div></div> <!></button> <!></section>');function Ee(g,t){te(t,!0);const[y,z]=de(),P=()=>ie(le,"$t",y);let u=se(t,"posts",19,()=>[]),b=ke(!1);const j=J(()=>(u()??[]).slice().sort((d,a)=>{var l,f;const e=(l=d.column)==null?void 0:l.order,n=(f=a.column)==null?void 0:f.order;return e!==void 0&&n!==void 0&&e!==n?e-n:e!==void 0&&n===void 0?-1:e===void 0&&n!==void 0?1:new Date(a.date).getTime()-new Date(d.date).getTime()})),h=d=>new Date(`${d}T00:00:00Z`).toISOString().slice(0,10);var $=q(),r=T($);{var i=d=>{var a=qe(),e=s(a);e.__click=[Re,b];var n=s(e),l=s(n),f=s(l);De(f,{class:"h-4 w-4"}),o(l);var G=v(l,2),M=s(G),K=s(M,!0);o(M);var U=v(M,4),Q=s(U,!0);o(U),o(G),o(n);var Z=v(n,2);const V=J(()=>`group-hover:translate-x-0.5 group-hover:text-primary h-4 w-4 text-muted-foreground transition-transform ${c(b)?"rotate-180":""}`);Te(Z,{get class(){return c(V)},"aria-hidden":"true"}),o(e);var p=v(e,2);{var C=D=>{var R=Ie();Se(R,21,()=>c(j),W=>W.slug,(W,_)=>{var ae=q(),ce=T(ae);{var ue=X=>{var oe=q(),me=T(oe);{var ve=N=>{var S=Ae(),B=s(S),L=s(B),A=s(L,!0);o(L);var F=v(L,2),I=s(F,!0);o(F),o(B),o(S),O(Y=>{k(A,c(_).title),E(F,"datetime",c(_).date),k(I,Y)},[()=>h(c(_).date)]),m(N,S)},fe=N=>{var S=Fe(),B=s(S),L=s(B),A=s(L),F=s(A,!0);o(A);var I=v(A,2),Y=s(I,!0);o(I),o(L),o(B),o(S),O(ge=>{E(B,"href",`${H}/blogs/${c(_).slug}`),k(F,c(_).title),E(I,"datetime",c(_).date),k(Y,ge)},[()=>h(c(_).date)]),m(N,S)};w(me,N=>{c(_).slug===t.currentSlug?N(ve):N(fe,!1)})}m(X,oe)};w(ce,X=>{c(_)&&X(ue)})}m(W,ae)}),o(R),m(D,R)};w(p,D=>{c(b)&&c(j).length>0&&D(C)})}o(a),O(D=>{k(K,D),k(Q,t.columnName)},[()=>P()("ui.columnLabel")]),m(d,a)};w(r,d=>{t.columnName&&d(i)})}m(g,$),re(),z()}xe(["click"]);var Ge=x('<meta property="og:type" content="article"> <meta property="og:title">',1),Ue=x("<!> <!>",1),Ze=x("<p>文章加载失败</p>");function at(g,t){te(t,!0),we("previousPathname","/blog");function y(r){const i=/^---\r?\n[\s\S]*?\r?\n---\r?\n?/;return r.replace(i,"")}function z(r){const i=`${H}/posts/res`;return r=r.replace(/!\[([^\]]*)\]\((\.?\/?res\/[^)]+)\)/g,(d,a,e)=>{const n=e.replace(/^\.?\/?res\//,"");return`![${a}](${i}/${n})`}),r=r.replace(/<img\s+([^>]*?)src=["']\.?\/?res\/([^"']+)["']([^>]*?)>/g,(d,a,e,n)=>`<img ${a}src="${i}/${e}"${n}>`),r}const P=J(()=>{var r;return(r=t.data)!=null&&r.content?z(t.data.content):""}),u=J(()=>y(c(P)));var b=q();ze(r=>{var i=q(),d=T(i);{var a=e=>{var n=Ge(),l=v(T(n),2);O(()=>{ye.title=t.data.meta.title,E(l,"content",t.data.meta.title)}),m(e,n)};w(d,e=>{t.data.meta&&e(a)})}m(r,i)});var j=T(b);{var h=r=>{Oe(r,{get blog(){return t.data.meta},children:(i,d)=>{var a=Ue(),e=T(a);{var n=f=>{Ee(f,{get columnName(){return t.data.meta.column.name},get posts(){return t.data.columnPosts},get currentSlug(){return t.data.meta.slug}})};w(e,f=>{t.data.meta.column&&f(n)})}var l=v(e,2);pe(l,{get content(){return c(u)}}),m(i,a)},$$slots:{default:!0}})},$=r=>{var i=Ze();m(r,i)};w(j,r=>{t.data.meta?r(h):r($,!1)})}m(g,b),re()}export{at as component,rt as universal};
