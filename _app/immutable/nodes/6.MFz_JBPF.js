import{b as h}from"../chunks/CTZKF4rf.js";import{e as b,M as w}from"../chunks/CKU_WmwH.js";import{n as k}from"../chunks/I9081wsh.js";import{p as y,c as P,i as x,a as $,t as C}from"../chunks/BDn-tyun.js";import{a6 as M,f as j,aa as L}from"../chunks/CdabQ3V7.js";import{C as O}from"../chunks/6Wzw6qDz.js";async function S({params:r,fetch:a}){try{const t=`${h}/notes/${r.slug}/index.md`,s=await a(t);if(!s.ok)throw new Error(`Could not fetch ${r.slug}`);const n=await s.text(),c=k.find(m=>m.slug===r.slug);return{content:n,meta:c}}catch(t){throw console.error("加载文章时出错:",t),b(404,`找不到 ${r.slug} 文章`)}}const A=Object.freeze(Object.defineProperty({__proto__:null,load:S},Symbol.toStringTag,{value:"Module"}));var z=C("<p>文章加载失败</p>");function B(r,a){var u,g,d;M(a,!0);let t=y(a,"data",7);function s(e,o){const i=`${h}/notes/${o}/res`;return e=e.replace(/!\[([^\]]*)\]\((\.?\/?res\/[^)]+)\)/g,(v,l,p)=>{const f=p.replace(/^\.?\/?res\//,"");return`![${l}](${i}/${f})`}),e=e.replace(/<img\s+([^>]*?)src=["']\.?\/?res\/([^"']+)["']([^>]*?)>/g,(v,l,p,f)=>`<img ${l}src="${i}/${p}"${f}>`),e}(u=t())!=null&&u.content&&((d=(g=t())==null?void 0:g.meta)!=null&&d.name)&&(t().content=s(t().content,t().meta.name));var n=P(),c=j(n);{var m=e=>{O(e,{className:"mt-16 lg:mt-32",children:(o,i)=>{w(o,{get content(){return t().content}})},$$slots:{default:!0}})},_=e=>{var o=z();$(e,o)};x(c,e=>{t().meta?e(m):e(_,!1)})}$(r,n),L()}export{B as component,A as universal};
